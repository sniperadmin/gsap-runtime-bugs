<template>
	<svg
		version="1.1"
		xmlns="http://www.w3.org/2000/svg"
		xmlns:xlink="http://www.w3.org/1999/xlink"
		x="0px"
		y="0px"
		width="176px"
		height="657px"
		viewBox="0 0 176 1057"
		enable-background="new 0 0 176 957"
		xml:space="preserve"
		overflow="visible"
	>
		<g id="Layer_1">
			<!-- gear1 -->
			<g class="element" id="element1">
				<path id="circ1" class="circle" fill="#00ADF2" d="M172.215,87.509c0.035,15.46-3.174,27.338-9.584,39.377c-14.119,26.518-41.258,45.375-74.035,45.375
				c-25.822,0-48.594-10.322-64.048-27.668C11.478,129.923,2.775,110.23,2.755,87.509C2.711,38.303,41.165,2.711,88.596,2.719
				c20.906,0.003,38.574,7.503,52.867,19.25C159.92,37.14,172.152,59.859,172.215,87.509z M17.846,87.49
				c0,18.358,8.755,37.959,22.083,51.127c12.814,12.659,32.163,19.125,49.125,19.125c17.4,0,36.072-7.98,49.041-21.208
				c12.824-13.08,20.084-32.181,20.084-50.083c0-18.927-7.826-37.311-22.334-50.415C122.754,24.21,105.984,16.617,89.57,16.617
				c-15.331,0-32.646,5.437-45.516,16.188C27.869,46.325,17.846,67.433,17.846,87.49z"/>
			<Gear1 class="gear" />
			</g>

			<!-- gear2 -->
			<g class="element" id="element2">
				<path id="circ2" class="circle" fill="#00ADF2" d="M172.459,243.509c0.035,15.46-3.174,27.338-9.584,39.377c-14.119,26.518-41.258,45.375-74.035,45.375
				c-25.821,0-48.594-10.322-64.048-27.668C11.723,285.923,3.02,266.23,3,243.509c-0.044-49.206,38.409-84.797,85.84-84.79
				c20.906,0.003,38.574,7.503,52.867,19.25C160.164,193.14,172.396,215.859,172.459,243.509z M18.091,243.49
				c0,18.358,8.755,37.959,22.083,51.127c12.814,12.659,32.163,19.125,49.125,19.125c17.4,0,36.072-7.98,49.041-21.208
				c12.824-13.08,20.084-32.181,20.084-50.083c0-18.927-7.826-37.311-22.334-50.415c-13.092-11.826-29.861-19.418-46.275-19.418
				c-15.33,0-32.646,5.437-45.516,16.188C28.113,202.325,18.091,223.433,18.091,243.49z"/>
			<Gear2 class="gear" />
			</g>

			<!-- gear3 -->
			<g class="element" id="element3">
				<path id="circ3" class="circle" fill="#00ADF2" d="M172.459,400.509c0.035,15.46-3.174,27.338-9.584,39.377c-14.119,26.518-41.258,45.375-74.035,45.375
				c-25.821,0-48.594-10.321-64.048-27.668C11.723,442.923,3.02,423.23,3,400.509c-0.044-49.206,38.409-84.797,85.84-84.79
				c20.906,0.003,38.574,7.503,52.867,19.25C160.164,350.14,172.396,372.859,172.459,400.509z M18.091,400.49
				c0,18.358,8.755,37.959,22.083,51.127c12.814,12.659,32.162,19.125,49.125,19.125c17.4,0,36.072-7.98,49.041-21.208
				c12.824-13.08,20.084-32.181,20.084-50.083c0-18.927-7.826-37.311-22.334-50.415c-13.092-11.826-29.861-19.418-46.275-19.418
				c-15.33,0-32.646,5.437-45.516,16.188C28.113,359.325,18.091,380.433,18.091,400.49z"/>
			<Gear3 class="gear" />
			</g>

			<!-- gear4 -->
			<g class="element" id="element4">
				<path id="circ4" class="circle" fill="#00ADF2" d="M170.459,556.509c0.035,15.46-3.174,27.338-9.584,39.377c-14.119,26.518-41.258,45.375-74.035,45.375
				c-25.821,0-48.594-10.321-64.048-27.668C9.723,598.924,1.02,579.23,1,556.509c-0.044-49.206,38.409-84.797,85.84-84.79
				c20.906,0.003,38.574,7.503,52.867,19.25C158.164,506.141,170.396,528.859,170.459,556.509z M16.091,556.49
				c0,18.358,8.755,37.959,22.083,51.127c12.814,12.659,32.162,19.125,49.125,19.125c17.4,0,36.072-7.98,49.041-21.208
				c12.824-13.079,20.084-32.181,20.084-50.083c0-18.928-7.826-37.312-22.334-50.416c-13.092-11.825-29.861-19.418-46.275-19.418
				c-15.33,0-32.646,5.437-45.516,16.188C26.113,515.324,16.091,536.433,16.091,556.49z"/>
				<Gear4 class="gear" />
			</g>

			<!-- gear5 -->
			<g class="element" id="element5">
				<path id="circ5" class="circle" fill="#00ADF2" d="M172,712.509c0.035,15.46-3.174,27.338-9.584,39.377c-14.119,26.518-41.258,45.375-74.035,45.375
					c-25.821,0-48.594-10.321-64.048-27.668C11.264,754.924,2.561,735.23,2.541,712.509c-0.044-49.206,38.409-84.798,85.84-84.79
					c20.906,0.004,38.574,7.504,52.867,19.25C159.705,662.141,171.938,684.859,172,712.509z M17.632,712.49
					c0,18.358,8.755,37.959,22.083,51.127c12.814,12.659,32.162,19.125,49.125,19.125c17.4,0,36.072-7.98,49.041-21.208
					c12.824-13.079,20.084-32.181,20.084-50.083c0-18.928-7.826-37.312-22.334-50.416c-13.092-11.825-29.861-19.418-46.275-19.418
					c-15.33,0-32.646,5.437-45.516,16.188C27.654,671.324,17.632,692.433,17.632,712.49z"/>
				<Gear5 class="gear" />
			</g>

			<!-- gear6 -->
			<g class="element" id="element6">
				<path id="circ6" class="circle" fill="#00ADF2" d="M171.459,867.509c0.035,15.46-3.174,27.338-9.584,39.377c-14.119,26.518-41.258,45.375-74.035,45.375
					c-25.821,0-48.594-10.321-64.048-27.668C10.723,909.924,2.02,890.23,2,867.509c-0.044-49.206,38.409-84.798,85.84-84.79
					c20.906,0.004,38.574,7.504,52.867,19.25C159.164,817.141,171.396,839.859,171.459,867.509z M17.091,867.49
					c0,18.358,8.755,37.959,22.083,51.127c12.814,12.659,32.162,19.125,49.125,19.125c17.4,0,36.072-7.98,49.041-21.208
					c12.824-13.079,20.084-32.181,20.084-50.083c0-18.928-7.826-37.312-22.334-50.416c-13.092-11.825-29.861-19.418-46.275-19.418
					c-15.33,0-32.646,5.437-45.516,16.188C27.113,826.324,17.091,847.433,17.091,867.49z"/>
				<Gear6 class="gear" />
			</g>
			<ArcFills id="ball_path" />
		</g>

		<path id="ball" fill="#3D3283" d="M29.793,50.34c3.575-3.698,3.475-9.594-0.224-13.168c-3.697-3.575-9.593-3.474-13.167,0.224
			c-3.574,3.698-3.474,9.593,0.224,13.168C20.323,54.137,26.219,54.038,29.793,50.34z"/>
		<g>
			<path id="CAD_Arc__x2D__by_Points_20_" fill="none" d="M87.485,946.5c-0.94,0.033-1.735,0.048-2.676,0.048
				c-41.318,0-74.813-33.495-74.813-74.813c0-1.456,0.034-2.686,0.115-4.14c0.056-42.937,34.872-77.707,77.81-77.707
				c0.767,0,1.414,0.009,2.181,0.03l-1.61-0.018c0.566,0.013,1.044,0.018,1.61,0.018c42.598,0,77.134-34.522,77.149-77.121
				c0.012-0.556,0.017-1.025,0.017-1.581c0-42.034-34.075-76.109-76.109-76.109c-1.644,0-3.032,0.043-4.672,0.144
				c-41.943-0.278-75.763-34.322-75.763-76.267c0-0.724,0.008-1.335,0.028-2.059c-0.011-0.543-0.016-1.002-0.016-1.545
				c0-42.471,34.429-76.899,76.9-76.899c0.766,0,1.412,0.009,2.177,0.031l-1.327-0.011c0.466,0.008,0.86,0.011,1.327,0.011
				c42.632,0,77.192-34.56,77.192-77.192c0-0.274-0.001-0.506-0.004-0.781c-1.195-43.832-36.669-78.654-80.515-79.039
				c-41.477-1.26-74.43-34.514-75.314-76c-0.094-1.576-0.134-2.909-0.134-4.488c0-41.62,33.739-75.359,75.359-75.359
				c2.528,0,4.663,0.102,7.18,0.343c41.931-1.762,74.8-36.041,74.8-78.01c0-23.332-9.016-43.254-26.543-58.654
				C126.317,15.39,108.523,8.569,87.665,8.569c-30.086,0-55.718,14.946-70.535,41.131"/>
		</g>
	</svg>
</template>

<script>
	import Gear1 from './process-subs/Gear1.vue'
	import Gear2 from './process-subs/Gear2.vue'
	import Gear3 from './process-subs/Gear3.vue'
	import Gear4 from './process-subs/Gear4.vue'
	import Gear5 from './process-subs/Gear5.vue'
	import Gear6 from './process-subs/Gear6.vue'
	import ArcFills from './process-subs/ArcFills.vue'
	import { gsap, CSSPlugin } from 'gsap'
	import { MotionPathPlugin } from 'gsap/MotionPathPlugin'
	// import { GSDevTools } from "gsap/GSDevTools"

	gsap.registerPlugin(MotionPathPlugin, CSSPlugin)

  export default {
		name: 'Process',
		components: {
			Gear1,
			Gear2,
			Gear3,
			Gear4,
			Gear5,
			Gear6,
			ArcFills,
		},
		props: {
			sub1: {
				type: String,
				default: ''
			},
			sub2: {
				type: String,
				default: ''
			},
			sub3: {
				type: String,
				default: ''
			},
			sub4: {
				type: String,
				default: ''
			},
			sub5: {
				type: String,
				default: ''
			},
			sub6: {
				type: String,
				default: ''
			},
		},
		methods: {
			anim() {
				// const vm = this
				const gears = gsap.utils.toArray('.gear')

				const dur = 3
				const tl = gsap.timeline({ repeat: -1, repeatDelay: 5, defaults: { duration: dur, ease: "none" } })

				gsap.set('.dialog', { opacity: 0 })
				gsap.set('.gear', { opacity: 1, transformOrigin: '50% 50%' })
				gsap.set('#ball_path, #ball', { opacity: 0 })

				window.addEventListener('resize', () => {
					tl.kill()
					gsap.set('.note', { opacity: 0 })
					this.anim()
				})

				// gears intro
				gsap.utils.toArray('.element').forEach((el, i) => {
					tl.from(el, {
						y: i % 2 === 0 ? i * 2 + 120 : i * 2 + 150,
						duration: 2
					}, 0)
				})

				gears.forEach((gear, i) => {
					tl.to(gear, {
						rotation: i % 2 === 0 ? 360 : -360,
					}, (dur) * i)
				})
			}
		},
		watch: {
			$route: {
				handler: function onRouteChanged() {
					gsap.killTweensOf('#ball')
				},
				deep: true,
				immediate: true
			}
		},

	mounted() {
		this.anim()
	},

	destroyed() {
		gsap.killTweensOf('#ball')
	}
}
</script>

<style scoped>

</style>
